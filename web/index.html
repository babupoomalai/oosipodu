<!doctype html>
<html>
<head>
	<title>Oosi Podu rewards</title>
</head>
<body>
<link rel="stylesheet" href="style.css"/>
<script src="./main.js"></script>
<script src="./js/index.js"></script>
<script src="./js/api.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
		integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin></script>

<div id="app" class="overall-container">
	<div class="header-container">
		<div>
          <span class="awesome-icon-container">
              <img src="assets/Icon awesome-question-circle.png">
               </span>
			<span class="toggler-container">
            <label class="switch">
              <input type="checkbox" checked/>
              <span class="slider round"></span>
            </label>
          </span>
		</div>
		<div class="main-heading">OOSI PODU REWARDS</div>
		<div class="sub-heading">Verify Vaccine to Earn Rewards</div>
	</div>

	<div class="main-container">
		<div v-if="!isAuthenticated">
			<div class="verify-header">VERIFY WITH MOBILE NUMBER</div>
			<div class="mb-3" v-if="!user.waitingForOTP">
				<div class="input-group">
					<input type="tel" class="mobile-number" placeholder="Mobile Number" v-model.trim="mobile"
						   v-on:keyup.enter="sendOTP()">
					<div class="input-group-append">
						<button type="submit" class="btn btn-secondary get-otp-button" v-on:click="sendOTP()">Send OTP
						</button>
					</div>
				</div>
			</div>

			<div class="mb-3" v-if="sendOTPError">
				<div class="alert alert-danger" role="alert">
					<small>{{ sendOTPError }}</small>
				</div>
			</div>

			<div class="mb-3" v-if="user.waitingForOTP">
				<div class="input-group">
					<input type="tel" class="mobile-number" placeholder="OTP" v-model.trim="user.otp"
						   v-on:keyup.enter="validateOTP()">
					<div class="input-group-append">
						<button type="submit" class="btn btn-secondary get-otp-button" v-on:click="validateOTP()">
							Validate OTP
						</button>
					</div>
				</div>
			</div>
			<div class="mb-3" v-if="sendOTPSuccess">
				<div class="alert alert-success" role="alert">
					<small>{{ sendOTPSuccess }}</small>
				</div>
			</div>
			<div class="mb-3" v-if="otpError">
				<div class="alert alert-danger" role="alert">
					<small>{{ otpError }}</small>
				</div>
			</div>
		</div>

		<div v-else>
			<h4 class="align-items-center d-flex justify-content-between mb-3">
				<span class="text-muted">Hello !</span>
			</h4>
			<div>
				<ul class="list-group mb-3">
					<li class="d-flex justify-content-between lh-condensed list-group-item">
						<div>
							<h6 class="my-0">{{ mobile }}</h6>
							<small class="text-muted" v-if="user.tokenExpiry">Expires in
								{{ user.tokenExpiry }}</small>
						</div>
						<div>
								<span class="btn btn-secondary btn-sm"
									  v-on:click="logout()">Logout</span>
						</div>
					</li>
				</ul>
			</div>
			<div v-if="isFinishedProcess">
				<div v-if="isAuthenticated && isVaccinated">
					<h5>
						<span>Congratulations, you are enrolled for Lucky draw of 5L</span> Opted: {{user.dbUser.opt_in}}
					</h5>
				</div>
				<div v-else-if="isAuthenticated">
					<h5>
						<span>Oops, Please vaccinate to enjoy the rewards</span>
					</h5>
				</div>
			</div>
			<div v-if="coupons !== null">
				<div v-for="coupon in coupons">
					<span> {{coupon.caption}} - {{coupon.coupon_code}} </span>
				</div>
			</div>
		</div>
	</div>

	<div class="footer-container">
		<div class="footer-header">Avail Discounts from 50+ Businesses</div>

		<div class="footer-brand-row-1">
          <span>
            <img src="./assets/SS-Logo.png"/>
          </span>

			<span style="padding-left: 14px">
            <img src="./assets/kumaran.png"/>
          </span>
		</div>

		<div class="footer-brand-row-2">
          <span>
            <img src="./assets/pothys.png"/>
          </span>

			<span style="padding-left: 79px">
            <img src="./assets/pazhamudir.png"/>
          </span>
		</div>
	</div>
</div>
</body>
</html>
